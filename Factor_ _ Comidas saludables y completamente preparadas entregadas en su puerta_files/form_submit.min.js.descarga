const environmentPrefix="",domain="factor75",brandCode="factor",brandPrefix="r/",leadAPIURL="https://users.factor75.com/factor/query",plansPageUrlStub="https://app.factor75.com/r/signup/plans?l=",loginUrl="https://app.factor75.com/r/login";function showFormErrors(errorMessages,buttonElement){var errorMessagesText="";if(errorMessages.errors?$.each(errorMessages.errors,(function(_key,err){err&&(errorMessagesText=errorMessagesText+"<br/>"+err.message)})):errorMessagesText=errorMessages,!buttonElement)return;const formParent=$(buttonElement).parents("form")[0];formParent&&$(formParent).find(".js-form-msg").remove();const errorElement='<div class="form-error-message"><label class="js-form-msg hs-error-msg" style="">'+errorMessagesText+"</label></div>";$(buttonElement).parent().append(errorElement)}function showFieldError(errorMessage,fieldElement){fieldElement.parent().find(".js-error-msg").remove();const name=fieldElement.attr("name");if(errorMessage){const errorElement='<div class="form-error-message"><label for="'+name+'" class="js-error-msg hs-error-msg" style="">'+errorMessage+"</label></div>";fieldElement.parent().append(errorElement)}}function GetURLParameter(sParam){const sURLVariables=window.location.search.substring(1).split("&");for(let i=0;i<sURLVariables.length;i++){const sParameterName=sURLVariables[i].split("=");if(sParameterName[0]===sParam)return sParameterName[1]}}function makeLeadRequest(mutationData,target,successCallback){$.ajax({url:leadAPIURL,method:"POST",data:JSON.stringify({query:mutationData}),headers:{"Content-Type":"application/json"},success:function(response){response.errors&&(response.errors[0]&&response.errors[0].message.indexOf("invalid zip")>-1?showFormErrors("Sorry, we don't deliver to your zip code yet.",target):response.errors[0]&&response.errors[0].message.indexOf("invalid email")>-1?showFieldError("Please enter a valid email address.",target):showFormErrors(response,target)),response.data?successCallback(response.data):showFormErrors(response,target)},error:function(response){showFormErrors(response.responseJSON,target)}})}const emailRegex=/^([a-zA-Z0-9_\-\.\+]+)@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.)|(([a-zA-Z0-9\-]+\.)+))([a-zA-Z]{2,4}|[0-9]{1,3})(\]?)$/,zipRegex=/(^\d{5}$)|(^\d{9}$)|(^\d{5}-\d{4}$)/;function hsOnReadyLoadJS(){$("<style type='text/css'>body form.hs-form .hs-form-field ul.inputs-list { display: none !important } </style>").appendTo("head"),showFormErrors(""),$("body").on("focusout","form input[name='email']",(function(e){e.preventDefault();const value=e.target.value;emailRegex.test(value)?showFieldError("",$(e.target)):showFieldError("Please enter a valid email address.",$(e.target))})),$("body").on("focusout","form input[name='zip']",(function(e){e.preventDefault();const value=e.target.value;zipRegex.test(value)?showFieldError("",$(e.target)):showFieldError("Please enter a valid zip code.",$(e.target))})),$("body").on("click",'form input[type="submit"]',(function(e){e.preventDefault(),gaClientId=window.ga&&void 0!==window.ga.getAll?window.ga.getAll()[0].get("clientId"):"";const formElement=$(this).parents("form")[0],form=$(formElement),inputs={email:form.find("input[name='email']").val(),zipCode:form.find("input[name='zip']").val(),utmSource:GetURLParameter("utm_source"),utmMedium:GetURLParameter("utm_medium"),utmCampaign:GetURLParameter("utm_campaign"),gaCookie:gaClientId,coupon:GetURLParameter("referral")?GetURLParameter("referral"):GetURLParameter("coupon"),referralCode:GetURLParameter("referral")};if(!inputs.email||!inputs.zipCode)return void showFormErrors("Email and zipcode are required",e.target);let mutationInputs="";$.each(inputs,(function(key,value){value&&(mutationInputs=mutationInputs+key+': "'+value+'",')}));const mutationData="mutation {lead(input: {"+mutationInputs+"}) {leadUuid}}";form.find(".js-error-msg").length?showFormErrors("Please correct your errors before submitting.",e.target):(showFormErrors(""),makeLeadRequest(mutationData,e.target,(function(data){if(data.lead){const uuid=data.lead.leadUuid;window.dataLayer&&window.dataLayer.push({event:"leadGenerated",leadId:uuid,coupon:GetURLParameter("referral")?GetURLParameter("referral"):GetURLParameter("coupon"),referral:GetURLParameter("referral")});const plansPageUrl=plansPageUrlStub+uuid;window.location=plansPageUrl}})))}))}"complete"===document.readyState||"loading"!==document.readyState&&!document.documentElement.doScroll?hsOnReadyLoadJS():document.addEventListener("DOMContentLoaded",hsOnReadyLoadJS);